"use strict";var id=null,email=null,hora=null,validadeCodeUser=function(e){var t={codigo:e};$.ajax({url:ENV.API_URL+"/post/validate/code/user",method:"POST",data:JSON.stringify(t),headers:{Accept:"application/json","Content-type":"application/json"},success:function(e){e.status.map(function(e){return id=e.id})}}).then(function(){swalNewPass()}).fail(function(e){switch(e.status){case 404:swal("Código de redefinição inválido!","Clique em ok para sair","error").then(function(){swalTypeItCode()});break;case 500:swal("Erro ao verificar código de recuperação, por favor contatar com os programadores!","Clique em ok para sair","error").then(function(){swalTypeItCode()})}})},swalNewPass=function t(){var e=document.createElement("div"),a=document.createElement("div"),n=document.createElement("input"),o=document.createElement("input");n.setAttribute("class","swal-content__input"),n.setAttribute("placeholder","Digite sua senha"),n.setAttribute("type","password"),o.setAttribute("class","swal-content__input"),o.setAttribute("placeholder","Confirme sua senha"),o.setAttribute("type","password"),e.appendChild(n),a.appendChild(o),swal({text:"Digite sua nova senha:",content:e,button:{closeModal:!1,text:"Próximo"}}).then(function(){var e;n.value?(e=n.value,/(?=.*[a-z])(?=.*[0-9])(?=.{6,}).*/.test(e)?swal({text:"Confirme novamente sua senha:",content:a,button:{closeModal:!1,text:"Confirmar"}}).then(function(){var e;o.value?n.value!=o.value?swal({title:"As senhas não se correspondem!",text:"Clique em continuar para seguir com o processo",icon:"error",buttons:["Cancelar","Continuar"]}).then(function(e){e&&t()}):($("#email").val(email),$("#senha-login").val(o.value),e={senha:o.value},$.ajax({url:ENV.API_URL+"/patch/user/password/"+id,method:"PATCH",data:JSON.stringify(e),headers:{Accept:"application/json","Content-type":"application/json"}}).then(function(){swal("Senha redefinida com sucesso!","Clique em ok para sair","success").then(function(){$("#button_login").click()})}).fail(function(){swal("Falha ao redefinir senha de usuário, por favor contatar com os programadores!","Clique em ok para sair","error").then(function(){window.location.reload()})})):swal({title:"Senha inválida!",text:"Clique em continuar para seguir com o processo",icon:"error",buttons:["Cancelar","Continuar"]}).then(function(e){e&&t()})}):swal({title:"Senha fraca!",text:"A senha tem que ter pelo menos 6 letras minúsculas com um 1 número!",icon:"error",buttons:["Cancelar","Continuar"]}).then(function(e){e&&t()})):swal({title:"Senha inválida!",text:"Clique em continuar para seguir com o processo",icon:"error",buttons:["Cancelar","Continuar"]}).then(function(e){e&&t()})})},swalTypeItCode=function t(){swal({text:"Digite o código de verificação que você recebeu em seu email:",content:"input",button:{closeModal:!1,text:"Próximo"}}).then(function(e){e?validadeCodeUser(e):swal({title:"Código de verificação inválido!",text:"Clique em continuar para seguir com o processo",icon:"error",buttons:["Cancelar","Continuar"]}).then(function(e){e&&t()})})},checkUserPassword=function a(){swal({title:"Esqueceu sua senha?",text:"Digite seu email previamente cadastrado:",content:"input",button:{closeModal:!1,text:"Próximo"}}).then(function(e){var t;e?(t={email:email=e,date:moment(new Date).tz("America/Sao_Paulo").format("HH:mm DD/MM/YYYY")},$.ajax({url:ENV.API_URL+"/post/validate/user/email",method:"POST",data:JSON.stringify(t),headers:{Accept:"application/json","Content-type":"application/json"}}).then(function(){swalTypeItCode()}).fail(function(e){switch(e.status){case 404:swal("Email de usuário inválido","Clique em ok para sair","error").then(function(){a()});break;case 500:case 400:swal("Erro na verificação de email","Clique em ok para sair","error").then(function(){a()})}})):swal({title:"Email inválido!",text:"Clique em continuar para seguir com o processo",icon:"error",buttons:["Cancelar","Continuar"]}).then(function(e){e&&a()})})};